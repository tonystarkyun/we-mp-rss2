# WeRSS 构建说明

## 构建安装包

### 前置要求
1. Python 3.8+ 及项目依赖 (`pip install -r requirements.txt`)
2. Node.js 及 Yarn (`yarn install` 在 web_ui 目录下)
3. Inno Setup 6 (下载地址: https://jrsoftware.org/isdl.php)

### 构建步骤

#### 方式一：使用构建脚本（推荐）
```bash
build_installer.bat
```

#### 方式二：手动构建
1. 构建前端：
   ```bash
   cd web_ui
   yarn build
   cd ..
   ```

2. 构建可执行文件：
   ```bash
   pyinstaller WeRSS-Standalone.spec --clean --noconfirm
   ```

3. 构建安装包：
   ```bash
   "C:\Program Files (x86)\Inno Setup 6\ISCC.exe" setup.iss
   ```

### 输出文件
- **可执行文件**: `dist-complete/WeRSS-Standalone.exe`
- **安装包**: `dist-installer/WeRSS-Setup.exe`

### 重要改进
- ✅ 修复了数据初始化问题：只在首次运行时初始化数据库
- ✅ 分离了安装包和运行程序
- ✅ 支持升级安装，保留用户数据
- ✅ 添加了版本信息和图标

### 使用说明
1. 使用 `WeRSS-Setup.exe` 进行安装
2. 安装后运行 `WeRSS-Standalone.exe` 启动程序
3. 首次运行会自动初始化数据库
4. 后续运行不会重置用户数据

### 目录结构
```
安装目录/
├── WeRSS-Standalone.exe    # 主程序
├── config.yaml             # 配置文件
├── data/                   # 数据目录（用户数据）
├── static/                 # 前端静态文件
├── driver/                 # 浏览器驱动
└── ...                     # 其他依赖文件
```